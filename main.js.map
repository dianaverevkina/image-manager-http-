{"version":3,"file":"main.js","mappings":"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","sources":["webpack://image-manager-http-/./src/js/ImageView.js","webpack://image-manager-http-/./src/js/api/createRequest.js","webpack://image-manager-http-/./src/js/ImageService.js","webpack://image-manager-http-/./src/js/File.js","webpack://image-manager-http-/./src/js/ImageWidget.js","webpack://image-manager-http-/./src/js/app.js","webpack://image-manager-http-/./src/index.js"],"sourcesContent":["export default class ImageView {\n  // Создаем элемент картинки\n  static renderImgElement({ id, path, name }) {\n    const imgEl = document.createElement('div');\n    imgEl.classList.add('images__item', 'item');\n    imgEl.setAttribute('data-id', id);\n    imgEl.innerHTML = `\n      <div class=\"item__img\">\n        <img src=${path} alt=${name} class=\"item__img-picture\">\n      </div>\n      <div class=\"item__delete\">\n        <img src=\"./images/cross.jpg\" alt=\"cross-icon\" class=\"item__cross\">\n      </div>\n    `;\n\n    return imgEl;\n  }\n}\n","const createRequest = async (options = {}, callback) => { // eslint-disable-line \n  fetch(options.url, {\n    method: options.method,\n    body: options.data,\n  })\n    .then((response) => {\n      if (response.status === 204) {\n        callback();\n        return;\n      }\n      response.json()\n        .then((result) => callback(result));\n    })\n    .catch((e) => {\n      console.error('Произошла ошибка: ', e);\n    });\n};\n\nexport default createRequest;\n","import createRequest from './api/createRequest';\n/**\n *  Класс для связи с сервером.\n *  Содержит методы для отправки запросов на сервер и получения ответов\n * */\nexport default class ImageService {\n  constructor() {\n    this.URL = 'http://localhost:3000';\n  }\n\n  // Получить все файлы\n  list(callback) {\n    createRequest({\n      url: `${this.URL}/files`,\n      method: 'GET',\n    }, callback);\n  }\n\n  // Получить один файл\n  get(id, callback) {\n    createRequest({\n      url: `${this.URL}/files/${id}`,\n      method: 'GET',\n    }, callback);\n  }\n\n  // Создать файл\n  create(data, callback) {\n    createRequest({\n      url: `${this.URL}/files`,\n      method: 'POST',\n      data,\n    }, callback);\n  }\n\n  // Удалить файл\n  delete(id, callback) {\n    createRequest({\n      url: `${this.URL}/files/${id}`,\n      method: 'DELETE',\n    }, callback);\n  }\n}\n","export default class File {\n  constructor({ id, filename, path }) {\n    this.id = id; // идентификатор (уникальный в пределах системы)\n    this.name = filename; // имя файла\n    this.path = path; // путь, по которому можно получить файл\n  }\n}\n","import ImageView from './ImageView';\nimport ImageService from './ImageService';\nimport File from './File';\n\nexport default class ImageWidget {\n  constructor(container) {\n    if (typeof container === 'string') {\n      this.container = document.querySelector(container);\n    }\n\n    this.fileContainer = this.container.querySelector('.file-container');\n    this.containerContent = this.fileContainer.querySelector('.file-container__content');\n    this.btnAddFile = this.fileContainer.querySelector('.btn-add');\n    this.input = this.fileContainer.querySelector('.file-container__input');\n    this.imagesContainer = this.container.querySelector('.images__container');\n\n    this.imageService = new ImageService();\n    this.deleteImg = this.deleteImg.bind(this);\n\n    this.addEvents();\n  }\n\n  // Загружаем все картинки с сервера\n  init() {\n    this.imageService.list((response) => {\n      if (response.length !== 0) {\n        response.files.forEach((img) => {\n          const file = new File(img);\n          const fileEl = ImageView.renderImgElement(file);\n          this.imagesContainer.append(fileEl);\n        });\n      }\n    });\n  }\n\n  // Добавляем обработчики событий\n  addEvents() {\n    this.fileContainer.addEventListener('dragover', (e) => {\n      e.preventDefault();\n      this.containerContent.classList.add('file-container__content_hovered');\n    });\n\n    this.fileContainer.addEventListener('dragleave', () => {\n      this.containerContent.classList.remove('file-container__content_hovered');\n    });\n\n    this.fileContainer.addEventListener('drop', (e) => {\n      e.preventDefault();\n      this.containerContent.classList.remove('file-container__content_hovered');\n      const { files } = e.dataTransfer;\n      [...files].forEach((file) => this.createImageFile(file));\n    });\n\n    this.btnAddFile.addEventListener('click', (e) => {\n      e.preventDefault();\n\n      this.input.value = '';\n      this.input.dispatchEvent(new MouseEvent('click'));\n    });\n\n    this.input.addEventListener('change', () => {\n      const { files } = this.input;\n      if (files.length === 0) return;\n      [...files].forEach((file) => this.createImageFile(file));\n    });\n\n    this.imagesContainer.addEventListener('click', (e) => this.deleteImg(e));\n  }\n\n  // Создаем картинку\n  createImageFile(img) {\n    const formData = new FormData();\n    formData.append('file', img);\n\n    this.imageService.create(formData, (response) => {\n      if (response) {\n        const file = new File(response.file);\n        const fileEl = ImageView.renderImgElement(file);\n        this.imagesContainer.append(fileEl);\n      }\n    });\n  }\n\n  // Удаляем изображение\n  deleteImg(e) {\n    e.preventDefault();\n    const { target } = e;\n    const imgDelete = target.closest('.item__delete');\n\n    if (!imgDelete) return;\n\n    const file = imgDelete.closest('.item');\n    this.imageService.delete(file.dataset.id, () => {\n      file.remove();\n    });\n  }\n}\n","import ImageWidget from './ImageWidget';\n\nconst widget = new ImageWidget('.app__container');\nwidget.init();\n","import './css/app.css';\nimport './js/app';\n"],"names":["ImageView","renderImgElement","_ref","id","path","name","imgEl","document","createElement","classList","add","setAttribute","innerHTML","createRequest","options","arguments","length","undefined","callback","fetch","url","method","body","data","then","response","status","json","result","catch","e","console","error","ImageService","constructor","URL","list","get","create","delete","File","filename","ImageWidget","container","querySelector","fileContainer","containerContent","btnAddFile","input","imagesContainer","imageService","deleteImg","bind","addEvents","init","files","forEach","img","file","fileEl","append","addEventListener","preventDefault","remove","dataTransfer","createImageFile","value","dispatchEvent","MouseEvent","formData","FormData","target","imgDelete","closest","dataset","widget"],"sourceRoot":""}